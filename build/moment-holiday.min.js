//! moment-holiday.js
//! version : 1.5.1
//! author : Kodie Grantham
//! license : MIT
//! https://github.com/kodie/moment-holiday
(function(){function v(e,t,r){for(var n,i=[],a=0;a<x.length;a++){var o=x[a](e,t);!o&&!1!==o||(n=o)}if(!1===n)return!1;if("string"==typeof n?t=n:n&&(i=n),!_.isMoment(i)&&!i.length&&t.charAt(0).match(/[0-9(]/)){var s=!1,h=t.split("|");1<h.length&&(s=!0),2<h.length&&(h=[h[0],h[1]]);for(a=0;a<h.length;a++){var l=_(e),f=h[a].split("/");if(1===f.length||2===f.length&&"("!==f[1].charAt(0)&&4===f[1].length){var d=h[a];a=-1,h=[];for(var u=1;u<13;u++)h.push(u+"/"+d)}else if(2<f.length&&l.year(parseInt(f[2])),l.month(parseInt(f[0])-1),"("===f[1].charAt(0)){var y=f[1].slice(1,-1).split(","),c=parseInt(y[0]),v=parseInt(y[1]),g=_(l).startOf("month"),p=_(l).endOf("month").diff(g,"days")+1,O=[];if(y[1]&&"["===y[1].charAt(0)){var b=!0;(v=parseInt(y[1].slice(1,-1)))<0&&(b=!1,v=parseInt(y[1].slice(2,-1))),g=_(l).date(v);for(var k=0;k<7;k++){if(g.day()===c){i.push(_(g));break}b?g.add(1,"day"):g.subtract(1,"day")}continue}for(var w=0;w<p;w++)g.day()===c&&O.push(_(g)),g.add(1,"day");if(!v){i=i.concat(O);continue}l=v<0?O[O.length+v]:O[v-1],i.push(l)}else i.push(l.date(f[1]))}if(s&&1<i.length){var m=i[1].diff(i[0],"days");if(1<m){var j=_(i[0]);i=[i[0]];for(a=0;a<m;a++)j.add(1,"day"),i.push(_(j))}}}for(i=P(i),a=0;a<i.length;a++)_.isMoment(i[a])?(r&&(0===i[a].day()&&(i[a]=i[a].add(1,"day")),6===i[a].day()&&(i[a]=i[a].subtract(1,"day"))),i[a]=i[a].startOf("day")):delete i[a];return!!i.length&&(1===i.length?i[0]:i)}function g(e,t){var r=[];t=P(t);for(var n=0;n<t.length;n++){var i=e.match(new RegExp(t[n],"gi"));i&&(r=r.concat(i))}return r}function l(e,t,r,n,i){var a={},o=[],s={};if(h=i||_.holidays.active,h.hasOwnProperty(t))o.push(t);else if(fk=O(t,h))o.push(fk);else{for(var l in h)if(h.hasOwnProperty(l)){if(a[l]=g(t,l.split(/[\s,.-]+/).filter(function(e){return 2<e.length})).length,h[l].keywords_n)if(g(t,h[l].keywords_n).length){a[l]=0;continue}if(h[l].keywords_y){var f=g(t,h[l].keywords_y);if(!f||f.length!==h[l].keywords_y.length){a[l]=0;continue}a[l]+=f.length}if(h[l].keywords){var d=g(t,h[l].keywords);if(!d)continue;a[l]+=d.length}}for(var u in a)a[u]&&a.hasOwnProperty(u)&&(o.length&&a[u]!==a[o[0]]?a[u]>a[o[0]]&&(o=[u]):o.push(u))}if(!o.length)return!1;if(!1===n)return o;for(var y=0;y<o.length;y++){var c=v(e,h[o[y]].date,r);c&&(s[o[y]]=c)}return!!Object.keys(s).length&&s}function f(e,t,r,n,i){var a=[];n&&(a={}),t=P(t),i=i||_.holidays.active;for(var o=0;o<t.length;o++){var s=l(e,t[o],r,n,i);s&&(a=n?u(a,s):a.concat(s))}return a}function p(e,t){var r=_.holidays.active,n={};for(var i in r)r.hasOwnProperty(i)&&(td=v(e,r[i].date,t))&&(n[i]=td);return n}function d(e){if(regions=e.split("/"),e=regions[0].toLowerCase().replace(" ","_"),regions.shift(),!_.holidays[e])try{var t="./locale/";"build"==__dirname.split("/").slice(-1).pop()&&(t="."+t),require(t+e)}catch(e){}return!!_.holidays[e]&&(regions.length?function(e,t){var r=_.holidays[e],n={};if(r)for(var i=0;i<t.length;i++){var a=t[i].toLowerCase(),o=_.holidays[e+"/"+a];for(var s in o={},r)if(r.hasOwnProperty(s)){var h=r[s].regions||[],l=r[s].regions_n||[];h.length&&h.join().toLowerCase().split(),l.length&&l.join().toLowerCase().split(),(!h.length&&!l.length||h.length&&~h.indexOf(a)||l.length&&!~l.indexOf(a))&&(o[s]=r[s])}o&&(n=u(n,o))}return!!Object.keys(n).length&&n}(e,regions):_.holidays[e])}function r(e,t,r,n){t=t||1;for(var i=p(e,n),a=_(e),o=e.year(),s=[],h=0;h<t;h++)for(var l=_(a);;){var f=!1;if(r?l.add(1,"day"):l.subtract(1,"day"),l.year()!==o&&(i=p(l,n),o=l.year()),!Object.keys(i).length){f=!0;break}for(var d in i)if(i.hasOwnProperty(d)){for(var u=!1,y=P(i[d]),c=0;c<y.length;c++)if(l.isSame(y[c],"day")){s.push(y[c]),a=_(l),u=!0;break}if(u){f=!0;break}}if(f)break}return!!s.length&&(1===s.length?s[0]:s)}var _="undefined"==typeof require||null===require||require.amd?this.moment:require("moment"),x=[],P=function(e){return e&&e.constructor!==Array?[e]:e},O=function(e,t){t.constructor===Object&&(t=Object.keys(t));for(var r=0;r<t.length;r++)if(e.toLowerCase()===t[r].toLowerCase())return t[r];return!1},u=function(e,t){return Object.assign({},e,t)};_.fn.holiday=function(e,t){_.holidays.active;var r={},n=!1;if(e){e.constructor!==Array&&(n=!0,e=[e]);for(var i=0;i<e.length;i++)(td=l(this,e[i],t))&&(r=Object.assign({},r,td))}else r=p(this,t);var a=Object.keys(r);return!!a.length&&(1===a.length&&n?r[a[0]]:r)},_.fn.holidays=function(e,t){return this.holiday(e,t)},_.fn.isHoliday=function(e,t){var r,n,i=[];if(n=e?(e=P(e),r=this.holiday(e,t),!1):(r=p(this,t),!0),!r)return!1;for(var a in r)if(r.hasOwnProperty(a))for(var o=P(r[a]),s=0;s<o.length;s++)if(this.isSame(o[s],"day")){if(!n)return!0;i.push(a)}return!!i.length&&(1===i.length?i[0]:i)},_.fn.previousHoliday=function(e,t){return r(this,e,!1,t)},_.fn.previousHolidays=function(e,t){return this.previousHoliday(e,t)},_.fn.nextHoliday=function(e,t){return r(this,e,!0,t)},_.fn.nextHolidays=function(e,t){return this.nextHoliday(e,t)},_.fn.holidaysBetween=function(e,t){e=e||new Date,e=_(e).subtract(1,"day");for(var r=p(this,t),n=_(this),i=n.year(),a=[],o=0;o<e.diff(this,"days")&&(n.add(1,"day"),n.year()!==i&&(r=p(n,t),i=n.year()),Object.keys(r).length);o++)for(var s in r){for(var h=!1,l=P(r[s]),f=0;f<l.length;f++)if(n.isSame(l[f],"day")){a.push(l[f]),h=!0;break}if(h)break}return!!a.length&&a},_.holidays={active:{},active_last:{}},_.modifyHolidays={set:function(e,t){var r={};if(e.constructor===Array){for(var n=[],i=0;i<e.length;i++){var a=l(this,e[i],null,!1);a&&(n=n.concat(a))}if(n.length)for(var o in r=u(_.holidays.active))r.hasOwnProperty(o)&&(~n.indexOf(o)||delete r[o])}else if("string"==typeof e){var s=d(e);if(s)if(t){var h=f(this,t,!1,!1,s);for(i=0;i<h.length;i++)r[h[i]]=u(s[h[i]])}else r=u(s)}else r=e;return!Object.keys(r).length&&e!==r||Object.is(_.holidays.active,r)||(_.holidays.active_last=u(_.holidays.active),_.holidays.active=r),this},add:function(e,t){if("string"==typeof e){var r=d(e);if(e={},r)if(t)for(var n=f(this,t,!1,!1,r),i=0;i<n.length;i++)e[n[i]]=u(r[n[i]]);else e=r}return Object.keys(e).length&&(_.holidays.active_last=u(_.holidays.active),_.holidays.active=u(_.holidays.active,e)),this},remove:function(e){e=P(e);var t=f(this,e,!1,!1),r=u(_.holidays.active);if(t)for(var n=0;n<t.length;n++)delete r[t[n]];return Object.is(_.holidays.active,r)||(_.holidays.active_last=u(_.holidays.active),_.holidays.active=r),this},undo:function(){var e=u(_.holidays.active);return _.holidays.active=u(_.holidays.active_last),_.holidays.active_last=e,this},load:function(e){e=P(e);for(var t=0;t<e.length;t++)d(e[t]);return this},extendParser:function(e){return x.push(e),this}},null!=("undefined"!=typeof module&&null!==module?module.exports:void 0)&&(module.exports=_)}).call(this);
//# sourceMappingURL=moment-holiday.min.js.map
